(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),o=a.n(r),l=a(28),s=a(13),u=a(4),i=a(19),m=a.n(i),d=a(3),p=a(38),f=a(1),b=a(41),E=a.n(b),h=a(64),v=function(e,t){var a=new Date,n=a.getTime();n+=2592e6,a.setTime(n),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(a,"; path=/")},j=c.a.createContext(),O=function(){return Object(n.useContext)(j)},g=new h.a,y=function(e){var t=e.children,a=Object(n.useState)(g.get("currentUser")&&"object"===typeof g.get("currentUser")&&g.get("currentUser")._id&&g.get("currentUser").email?g.get("currentUser"):null),r=Object(f.a)(a,2),o=r[0],l=r[1],s="Bearer ".concat(g.get("token")),u=function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,c,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.prev=1,e.next=4,E.a.post("".concat("https://server.docify.devtahsin.com","/api/users/login"),{email:a,password:n},{withCredentials:!0});case 4:return c=e.sent,v("token",c.data.token),(r=c.data.user)&&r._id&&r.email&&(l(r),v("currentUser",JSON.stringify(r))),e.abrupt("return",Object(d.a)({type:"success"},c));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",Object(d.a)({type:"error"},e.t0.response));case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),i={signup:function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,c,r,o,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,c=t.phone,r=t.password,o=t.password2,e.prev=1,e.next=4,E.a.post("".concat("https://server.docify.devtahsin.com","/api/users"),{name:a,email:n,phone:c,password:r,password2:o},{withCredentials:!0});case 4:return l=e.sent,e.abrupt("return",Object(d.a)({type:"success"},l));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",Object(d.a)({type:"error"},e.t0.response));case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),login:u,logout:function(){g.remove("token"),g.remove("Docify"),g.remove("currentUser"),l(null)},Authorization:s,currentUser:o,setCurrentUser:l};return c.a.createElement(j.Provider,{value:i},t)};var w=function(e){var t=e.component,a=Object(u.a)(e,["component"]),n=O().currentUser;return n&&n._id&&n.email?c.a.createElement(s.b,a,function(e){return c.a.createElement(t,e)}):c.a.createElement(s.a,{to:"/login"})};var S=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return O().currentUser?c.a.createElement(s.a,{to:"/"}):c.a.createElement(s.b,a,function(e){return c.a.createElement(t,e)})},C=a(95),N=a(97),x=function(e){var t=e.children;return Object(n.useEffect)(function(){var e=Object(C.a)("https://server.docify.devtahsin.com");e.on("connect",function(){v("socketid",e.id)}),e.on("new_notice",function(e){N.a.success(e.message,{theme:"dark",position:"bottom-left",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0})}),e.on("connect_error",function(){setTimeout(function(){return e.connect()},5e3)})},[]),c.a.createElement(c.a.Fragment,null,t)},k=a(48),_=c.a.createContext(),D=function(){return Object(n.useContext)(_)},B=[],I=function(e,t){switch(t.type){case"load":return[].concat(Object(k.a)(e),Object(k.a)(t.payload));case"create":return[].concat(Object(k.a)(e),[t.doc]);case"update":return e.map(function(e){return e._id!==t.payload._id?e:t.payload});case"delete":return e.filter(function(e){return e._id.toString()!==t.docId.toString()});case"unload":return[];default:return e}},L=function(e){var t=e.children,a=Object(n.useReducer)(I,B),r=Object(f.a)(a,2),o={docs:r[0],dispatchDocs:r[1]};return c.a.createElement(_.Provider,{value:o},t)},T=a(173),P=a(174),U=a(169),G=function(e,t,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object(n.useState)(),o=Object(f.a)(r,2),l=o[0],s=o[1],u=Object(n.useState)(!1),i=Object(f.a)(u,2),m=i[0],p=i[1],b=O(),j=b.Authorization,g=b.logout,y=(new h.a).get("socketid");return Object(n.useEffect)(function(){return e&&("get"===t||"delete"===t?E.a[t](a,{headers:{Authorization:j,socketid:y},withCredentials:!0}).then(function(e){s(Object(d.a)({type:"success"},e)),e.data.token&&v("token",e.data.token)}).catch(function(e){e.response?(s(Object(d.a)({type:"error"},e.response)),401===e.response.status&&setTimeout(function(){g()},3e3)):s({type:"error",data:{message:"Something wrong happened"}})}).then(function(){p(!0)}):E.a[t](a,Object(d.a)({},c),{headers:{Authorization:j,socketid:y},withCredentials:!0}).then(function(e){s(Object(d.a)({type:"success"},e)),e.data.token&&v("token",e.data.token)}).catch(function(e){e.response?(401===e.response.status&&setTimeout(function(){g()},3e3),s(Object(d.a)({type:"error"},e.response))):s({type:"error",data:{message:"Something wrong happened!"}})}).then(function(){p(!0)})),function(){p(!1)}},[e]),m&&l},A=a(175),F=function(e){var t=e.show,a=e.variant,n=e.children,r=Object(u.a)(e,["show","variant","children"]);return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(A.a,Object.assign({variant:a},r),n))},M=a(90),H=function(e){var t=e.loading,a=e.text;return c.a.createElement(F,{variant:"info",show:t},c.a.createElement("div",{className:"d-flex"},c.a.createElement(M.HashLoader,{size:30,color:"#135F7A",loading:t}),c.a.createElement("div",{className:"ms-2"},a,"...")))},R=function(e){var t=e.show,a=e.handleClose,r=e.doc,o=Object(n.useState)(r.title),l=Object(f.a)(o,2),s=l[0],u=l[1],i=Object(n.useState)(!1),m=Object(f.a)(i,2),d=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(f.a)(b,2),h=E[0],v=E[1],j=Object(n.useState)(""),O=Object(f.a)(j,2),g=O[0],y=O[1],w=Object(n.useState)(""),S=Object(f.a)(w,2),C=S[0],N=S[1],x=D().dispatchDocs,k=G(d,"put","".concat("https://server.docify.devtahsin.com","/api/docs/").concat(r._id),{title:s}),_=function(){y(""),N(""),v(!1),a()};return Object(n.useEffect)(function(){return k&&("success"===k.type?(N(k.data.message),setTimeout(function(){N(""),_(),x({type:"update",payload:k.data.doc})},300)):y(k.data.message),v(!1),p(!1)),function(){p(!1)}},[k]),c.a.createElement(T.a,{show:t,onHide:_},c.a.createElement(T.a.Header,{closeButton:!0},c.a.createElement(T.a.Title,null,c.a.createElement("h5",null,"You're editing: ",r.title))),c.a.createElement(T.a.Body,null,c.a.createElement(P.a,{onSubmit:function(e){if(e.preventDefault(),y(""),N(""),r.title.trim()===s.trim())return y("Nothing to update");v(!0),p(!0)}},c.a.createElement(F,{variant:"danger",show:g},g),c.a.createElement(F,{variant:"success",show:C},C),c.a.createElement(H,{loading:h,text:"Updating ".concat(r.title)}),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicTitle"},c.a.createElement(P.a.Label,null,"New Title"),c.a.createElement(P.a.Control,{type:"text",value:s,onChange:function(e){u(e.target.value)},placeholder:"Ex: Passport, NID..."})),c.a.createElement(U.a,{variant:"primary",type:"submit"},"Update"))))},Y=function(e){var t=e.show,a=e.handleClose,r=e.doc,o=Object(n.useState)(!1),l=Object(f.a)(o,2),s=l[0],u=l[1],i=Object(n.useState)(!1),m=Object(f.a)(i,2),d=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(f.a)(b,2),h=E[0],v=E[1],j=Object(n.useState)(!1),O=Object(f.a)(j,2),g=O[0],y=O[1],w="".concat("https://server.docify.devtahsin.com","/api/docs/").concat(r._id),S=D().dispatchDocs,C=G(h,"delete","".concat("https://server.docify.devtahsin.com","/api/docs/").concat(r._id)),N=function(){a(),u(""),p("")};return Object(n.useEffect)(function(){return C&&("success"===C.type?(p(C.data.message),setTimeout(function(){N(),S({type:"delete",docId:r._id})},300)):u(C.data.message),v(!1),y(!1)),function(){y(!1),v(!1)}},[C]),c.a.createElement(T.a,{show:t,onHide:N},c.a.createElement(T.a.Header,{closeButton:!0},c.a.createElement(T.a.Title,null,c.a.createElement("h5",null,"Confirm deletion"))),c.a.createElement(T.a.Body,null,c.a.createElement(F,{variant:"danger",show:s},s),c.a.createElement(F,{variant:"success",show:d},d),c.a.createElement(H,{loading:g,text:"Deleting ".concat(r.title)}),c.a.createElement("p",null,"Do you really want to delete ",c.a.createElement("b",null,r.title),"?"),c.a.createElement("img",{src:w,alt:r.title,width:"200px"})),c.a.createElement(T.a.Footer,null,c.a.createElement(U.a,{variant:"secondary",onClick:N},"Cancel"),c.a.createElement(U.a,{variant:"danger",onClick:function(){y(!0),setTimeout(function(){v(!0)},3e3)}},"Yes")))},q=function(e){var t=e.show,a=e.handleClose,r=e.doc,o=Object(n.useState)(""),l=Object(f.a)(o,2),s=l[0],u=l[1],i=Object(n.useState)(""),m=Object(f.a)(i,2),d=m[0],p=m[1],b=Object(n.useState)(""),E=Object(f.a)(b,2),h=E[0],v=E[1],j=Object(n.useState)(!1),O=Object(f.a)(j,2),g=O[0],y=O[1],w=Object(n.useState)(!1),S=Object(f.a)(w,2),C=S[0],N=S[1],x=Object(n.useState)(""),k=Object(f.a)(x,2),_=k[0],D=k[1],B=Object(n.useState)(""),I=Object(f.a)(B,2),L=I[0],A=I[1],M=r.title,R=function(){N(!1),a()},Y=G(g,"post","".concat("https://server.docify.devtahsin.com","/api/docs/mail/").concat(r._id),{receiver:s,subject:d,message:h}),q=function(e){return e.preventDefault(),D(""),A(""),N(!1),s?d?(N(!0),void y(!0)):D("Subject is required!"):D("Receiver address is required!")};return Object(n.useEffect)(function(){return p(M),function(){p("")}},[M]),Object(n.useEffect)(function(){return Y&&(Y.type&&"success"===Y.type?(A(Y.data.message),u(""),v(""),setTimeout(function(){A(""),R()},700)):D(Y.data.message),N(!1)),y(!1),function(){y(!1)}},[Y]),c.a.createElement(T.a,{show:t,onHide:R},c.a.createElement(T.a.Header,{closeButton:!0},c.a.createElement(T.a.Title,null,c.a.createElement("h5",null,"Mail your document"))),c.a.createElement(T.a.Body,null,c.a.createElement(P.a,{onSubmit:q},c.a.createElement(F,{variant:"danger",show:_},_),c.a.createElement(F,{variant:"success",show:L},L),c.a.createElement(H,{loading:C,text:"Sending"}),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicReceiver"},c.a.createElement(P.a.Label,null,"Receiver"),c.a.createElement(P.a.Control,{type:"text",placeholder:"fulan@gmail.com",value:s,onChange:function(e){u(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicSubject"},c.a.createElement(P.a.Label,null,"Subject"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Passport of Fulan Ibn Fulan",value:d,onChange:function(e){p(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicMessage"},c.a.createElement(P.a.Label,null,"Message"),c.a.createElement(P.a.Control,{as:"textarea",placeholder:"Message",value:h,onChange:function(e){v(e.target.value)},style:{height:"100px"}}))),c.a.createElement("p",null,"* Email will be sent from: ",c.a.createElement("b",null,"docify@devtahsin.com")," ",c.a.createElement("br",null),"* Check the spam folder")),c.a.createElement(T.a.Footer,null,c.a.createElement(U.a,{variant:"primary",type:"button",onClick:q},"Send Mail"),c.a.createElement(U.a,{variant:"secondary",type:"button",onClick:R},"Cancel")))},z=function(e){var t=e.show,a=e.handleClose,r=Object(n.useState)(""),o=Object(f.a)(r,2),l=o[0],s=o[1],u=Object(n.useState)(),i=Object(f.a)(u,2),d=i[0],b=i[1],h=Object(n.useState)(!1),v=Object(f.a)(h,2),j=v[0],g=v[1],y=Object(n.useState)(!1),w=Object(f.a)(y,2),S=w[0],C=w[1],N=Object(n.useState)(""),x=Object(f.a)(N,2),k=x[0],_=x[1],B=Object(n.useState)(""),I=Object(f.a)(B,2),L=I[0],G=I[1],A=O().Authorization,M=D().dispatchDocs,R=function(){s(""),b(null),C(!1),_(""),G(""),a()};return Object(n.useEffect)(function(){return Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j&&((t=new FormData).append("title",l),t.append("document",d),E.a.post("".concat("https://server.docify.devtahsin.com","/api/docs"),t,{headers:{Authorization:A,"Content-Type":"multipart/form-data"}}).then(function(e){G(e.data.message),s(""),b(null),setTimeout(function(){G(null),R(),M({type:"create",doc:e.data.doc})},300)}).catch(function(e){_(e.response.data.message),401===e.response.status&&(window.location.href="/")}).then(function(){C(!1)}));case 1:case"end":return e.stop()}},e)}))(),function(){g(!1)}},[j]),c.a.createElement(T.a,{show:t,onHide:R},c.a.createElement(T.a.Header,{closeButton:!0},c.a.createElement(T.a.Title,null,c.a.createElement("h5",null,"Add new document"))),c.a.createElement(T.a.Body,null,c.a.createElement(P.a,{onSubmit:function(e){if(e.preventDefault(),g(!1),_(""),C(!1),!l||!d)return _("Please give a title and select a file");C(!0),g(!0)}},c.a.createElement(F,{variant:"danger",show:k},k),c.a.createElement(F,{variant:"success",show:L},L),c.a.createElement(H,{loading:S,text:"Uploading"}),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicTitle"},c.a.createElement(P.a.Label,null,"Document Title"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Ex: Passport, NID...",value:l,onChange:function(e){s(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicTitle"},c.a.createElement(P.a.Label,null,"Select File"),c.a.createElement(P.a.Control,{type:"file",onChange:function(e){b(e.target.files[0])}})),c.a.createElement(U.a,{variant:"primary",type:"submit"},"Upload"))))},J=c.a.createContext(),W=function(){return Object(n.useContext)(J)},Q=function(e){var t=e.children,a=Object(n.useState)({title:"",_id:""}),r=Object(f.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(""),u=Object(f.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)(!1),p=Object(f.a)(d,2),b=p[0],E=p[1],h=Object(n.useState)(!1),v=Object(f.a)(h,2),j=v[0],O=v[1],g=Object(n.useState)(!1),y=Object(f.a)(g,2),w=y[0],S=y[1],C=Object(n.useState)(!1),N=Object(f.a)(C,2),x=N[0],k=N[1];Object(n.useEffect)(function(){switch(i.type){case"add":E(!0);break;case"edit":S(!0),l(i.doc);break;case"mail":k(!0),l(i.doc);break;case"delete":O(!0),l(i.doc);break;default:l({title:"",_id:""})}return function(){l({title:"",_id:""})}},[i]);var _={selectedDoc:o,setSelectedDoc:l,docAction:i,setDocAction:m,setShowNewDocModal:E};return c.a.createElement(J.Provider,{value:_},t,c.a.createElement(z,{show:b,handleClose:function(){E(!1)}}),c.a.createElement(R,{show:w,doc:o,handleClose:function(){S(!1)}}),c.a.createElement(q,{show:x,doc:o,handleClose:function(){k(!1)}}),c.a.createElement(Y,{show:j,doc:o,handleClose:function(){O(!1)}}))},Z=a(91),K=a.n(Z),V=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container-fluid pt-1 ".concat(K.a.layout)},t))},X=function(e){var t=e.children,a=O(),r=a.currentUser,o=a.setCurrentUser,l=Object(n.useState)(!1),s=Object(f.a)(l,2),u=s[0],i=s[1],m=G(u,"get","".concat("https://server.docify.devtahsin.com","/api/users/me"));return Object(n.useEffect)(function(){return"undefined"!==r&&r&&!r._id||i(!0),function(){i(!1)}},[]),Object(n.useEffect)(function(){return m&&m.data&&(o(m.data.user),v("currentUser",JSON.stringify(m.data.user))),function(){}},[m]),c.a.createElement(c.a.Fragment,null,t)},$=a(170),ee=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(X,null,c.a.createElement(x,null,c.a.createElement(L,null,c.a.createElement(Q,null,c.a.createElement(V,null,t))))),c.a.createElement($.a,null))},te=a(63),ae=a.n(te),ne=a(171),ce=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),u=Object(f.a)(o,2),i=u[0],d=u[1],b=Object(n.useState)(!1),E=Object(f.a)(b,2),h=E[0],v=E[1],j=Object(n.useState)(!1),g=Object(f.a)(j,2),y=g[0],w=g[1],S=Object(n.useState)(""),C=Object(f.a)(S,2),N=C[0],x=C[1],k=Object(n.useState)(""),_=Object(f.a)(k,2),B=_[0],I=_[1],L=Object(n.useState)(),T=Object(f.a)(L,2),G=T[0],A=T[1],M=Object(n.useState)(!1),R=Object(f.a)(M,2),Y=R[0],q=R[1],z=Object(s.g)(),J=O().login,W=D().dispatchDocs;return Object(n.useEffect)(function(){return W({type:"unload"}),function(){}},[]),Object(n.useEffect)(function(){return Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=13;break}return e.prev=1,e.next=4,J({email:a,password:i});case 4:"error"===(t=e.sent).type?(v(!0),x(t.data.message)):(w(!0),I(t.data.message),setTimeout(function(){w(!1),I(null),z.push("/")},1e3)),A(!1),q(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))(),function(){A(!1)}},[G]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne.a,{className:"my-2 rounded d-flex align-items-center justify-content-center"},c.a.createElement(P.a,{className:"".concat(ae.a.formCard," bg-white p-4 rounded"),onSubmit:function(e){if(e.preventDefault(),A(!1),v(!1),w(!1),q(!1),x(""),I(""),!a||!i)return v(!0),void x("All fields are required!");q(!0),A(!0)}},c.a.createElement("h2",{className:"text-center"},"Docify"),c.a.createElement("p",{className:"text-center"},"An address for your documents"),c.a.createElement("hr",null),c.a.createElement(F,{variant:"danger",show:h},N),c.a.createElement(F,{variant:"success",show:y},B),c.a.createElement(H,{loading:Y,text:"Logging you in"}),c.a.createElement("h4",null,"Login"),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicEmail"},c.a.createElement(P.a.Label,null,"Email"),c.a.createElement(P.a.Control,{type:"email",placeholder:"Enter your email",value:a,onChange:function(e){r(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicPassword"},c.a.createElement(P.a.Label,null,"Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Enter your password",value:i,onChange:function(e){d(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("span",null,"Don't have an account? "),c.a.createElement(l.b,{to:"/signup"},"Sign up")),c.a.createElement(U.a,{variant:"primary",type:"submit"},"Login"))))},re=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),u=Object(f.a)(o,2),i=u[0],d=u[1],b=Object(n.useState)(""),E=Object(f.a)(b,2),h=E[0],v=E[1],j=Object(n.useState)(""),g=Object(f.a)(j,2),y=g[0],w=g[1],S=Object(n.useState)(""),C=Object(f.a)(S,2),N=C[0],x=C[1],k=Object(n.useState)(!1),_=Object(f.a)(k,2),B=_[0],I=_[1],L=Object(n.useState)(!1),T=Object(f.a)(L,2),G=T[0],A=T[1],M=Object(n.useState)(""),R=Object(f.a)(M,2),Y=R[0],q=R[1],z=Object(n.useState)(""),J=Object(f.a)(z,2),W=J[0],Q=J[1],Z=Object(n.useState)(),K=Object(f.a)(Z,2),V=K[0],X=K[1],$=Object(n.useState)(!1),ee=Object(f.a)($,2),te=ee[0],ce=ee[1],re=Object(s.g)(),oe=D().dispatchDocs,le=O().signup,se=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I(!1),A(!1),ce(!1),q(""),Q(""),a&&i&&h&&y&&N){e.next=10;break}return I(!0),q("All fields are required!"),e.abrupt("return");case 10:ce(!0),X(!0);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){return oe({type:"unload"}),function(){}},[]),Object(n.useEffect)(function(){return Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=12;break}return e.prev=1,e.next=4,le({name:a,email:i,phone:h,password:y,password2:N});case 4:"error"===(t=e.sent).type?(I(!0),q(t.data.message),X(!1)):(A(!0),Q(t.data.message),setTimeout(function(){A(!1),Q(null),re.push("/login")},1500)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:ce(!1);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))(),function(){X(!1)}},[V]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne.a,{className:"my-2 rounded d-flex align-items-center justify-content-center"},c.a.createElement(P.a,{className:"".concat(ae.a.formCard," bg-white p-4 rounded"),onSubmit:se},c.a.createElement("h2",{className:"text-center"},"Docify"),c.a.createElement("p",{className:"text-center"},"An address for your documents"),c.a.createElement("hr",null),c.a.createElement("h4",null,"Sign up"),c.a.createElement(F,{variant:"danger",show:B},Y),c.a.createElement(F,{variant:"success",show:G},W),c.a.createElement(H,{loading:te,text:"Signing up"}),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicName"},c.a.createElement(P.a.Label,null,"Your Name"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Enter your name",value:a,onChange:function(e){r(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicEmail"},c.a.createElement(P.a.Label,null,"Email"),c.a.createElement(P.a.Control,{type:"email",placeholder:"Enter your email",value:i,onChange:function(e){d(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicPhone"},c.a.createElement(P.a.Label,null,"Phone"),c.a.createElement(P.a.Control,{type:"text",placeholder:"Enter your phone",value:h,onChange:function(e){v(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicPassword"},c.a.createElement(P.a.Label,null,"Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Enter your password",value:y,onChange:function(e){w(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicRepeatPassword"},c.a.createElement(P.a.Label,null,"Repeat Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Repeat your password",value:N,onChange:function(e){x(e.target.value)}})),c.a.createElement("div",null,c.a.createElement("span",null,"Already have an account? "),c.a.createElement(l.b,{to:"/login"},"Login")),c.a.createElement(U.a,{variant:"primary",type:"submit"},"Sign up"))))},oe=a(92),le=a.n(oe),se=a(93),ue=a(96),ie=a(67),me=a.n(ie),de=a(94),pe=a.n(de),fe=a(42),be=a.n(fe),Ee=function(e){var t=e.show,a=e.doc,n="".concat("https://server.docify.devtahsin.com","/api/docs/download/").concat(a._id),r=W().setDocAction;return c.a.createElement("div",null,c.a.createElement("div",{className:"".concat(be.a.options," ").concat(t?be.a.show:null)},c.a.createElement("a",{href:"".concat("https://server.docify.devtahsin.com","/api/docs/").concat(a._id),target:"_blank",rel:"noopener noreferrer",className:"".concat(be.a.option)},c.a.createElement("i",{className:"bi bi-box-arrow-up-right"}),c.a.createElement("span",{className:"ms-2"},"Open")),c.a.createElement("a",{href:n,className:"".concat(be.a.option)},c.a.createElement("i",{className:"bi bi-download"}),c.a.createElement("span",{className:"ms-2"},"Download")),c.a.createElement("div",{className:"".concat(be.a.option),onClick:function(){r({type:"mail",doc:a})}},c.a.createElement("i",{className:"bi bi-envelope"}),c.a.createElement("span",{className:"ms-2"},"Mail")),c.a.createElement("div",{className:"".concat(be.a.option),onClick:function(){r({type:"edit",doc:a})}},c.a.createElement("i",{className:"bi bi-pencil"}),c.a.createElement("span",{className:"ms-2"}," Edit")),c.a.createElement("div",{className:"".concat(be.a.option),onClick:function(){r({type:"delete",doc:a})}},c.a.createElement("i",{className:"bi bi-trash"}),c.a.createElement("span",{className:"ms-2"},"Delete"))))},he=function(){return c.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center text-center bg-dark text-light p-2"},c.a.createElement("div",{className:"display-1"},c.a.createElement("i",{className:"bi bi-file-earmark-pdf"})),c.a.createElement("h5",null,"No preview available"),c.a.createElement("p",null,"Download the file or ",c.a.createElement("br",null)," open in new tab"))},ve=function(e){var t=e.children;return c.a.createElement("div",{className:"col-sm-12 col-md-6 col-lg-3",style:{padding:"8px"}},t)},je=function(e){var t=e.doc,a=Object(n.useState)(),r=Object(f.a)(a,2),o=r[0],l=r[1],s=Object(n.useState)(),u=Object(f.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)(),p=Object(f.a)(d,2),b=p[0],E=p[1],h="".concat("https://server.docify.devtahsin.com","/api/docs/").concat(t._id),v="".concat("https://server.docify.devtahsin.com","/api/docs/download/").concat(t._id),j=Object(n.useState)(!1),O=Object(f.a)(j,2),g=O[0],y=O[1],w=Object(n.useRef)();return Object(n.useEffect)(function(){return window.addEventListener("click",function(e){e.target!==w.current&&y(!1)}),function(){}},[]),c.a.createElement(ve,null,c.a.createElement("div",{className:"".concat(me.a.galleryItem)},c.a.createElement("div",{className:"rounded"},c.a.createElement("div",{className:"d-flex justify-content-between mt-1 mb-2 position-relative"},c.a.createElement("div",null,c.a.createElement("i",{className:"bi bi-clock me-2"}),pe()(t.createdAt).format("DD MMMM YYYY")),c.a.createElement(Ee,{show:g,doc:t}),c.a.createElement("div",{onClick:function(){y(function(e){return!e})}},c.a.createElement("i",{className:"bi bi-three-dots-vertical",role:"button",ref:w}))),c.a.createElement("div",{className:"".concat(me.a.thumbnail_container),role:"button"},"application/pdf"===t.mimetype&&c.a.createElement(he,null),"application/pdf"!==t.mimetype&&c.a.createElement("img",{src:h,alt:t.title,crossOrigin:"use-credentials",className:"".concat(me.a.thumbnail),onClick:"application/pdf"!==t.mimetype?function(){!function(e,t){l(!0),m(e),E(t)}(h,t.title)}:function(){}})),c.a.createElement("h5",{className:"my-2"},t.title))),o&&c.a.createElement(ue.a,{medium:i,alt:b,showRotate:!0,downloadLink:v,onClose:function(){l(!1)}}))},Oe=a(172),ge=function(e){var t=e.docs;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe.a,null,t.map(function(e){return c.a.createElement(je,{key:Object(se.uniqueId)()*Math.random(),doc:e})})))},ye=function(e){var t=e.show,a=e.handleClose,r=Object(n.useState)(""),o=Object(f.a)(r,2),l=o[0],s=o[1],u=Object(n.useState)(""),i=Object(f.a)(u,2),m=i[0],d=i[1],p=Object(n.useState)(""),b=Object(f.a)(p,2),E=b[0],h=b[1],v=Object(n.useState)(""),j=Object(f.a)(v,2),g=j[0],y=j[1],w=Object(n.useState)(""),S=Object(f.a)(w,2),C=S[0],N=S[1],x=Object(n.useState)(),k=Object(f.a)(x,2),_=k[0],D=k[1],B=Object(n.useState)(),I=Object(f.a)(B,2),L=I[0],A=I[1],M=O(),R=M.currentUser,Y=M.setCurrentUser,q=Object(n.useState)(!1),z=Object(f.a)(q,2),J=z[0],W=z[1],Q=Object(n.useState)(!1),Z=Object(f.a)(Q,2),K=Z[0],V=Z[1],X=function(e){e.preventDefault(),D(""),A(""),V(!1),0!==g.trim().length?(V(!0),W(!0)):D("Password is required to make any change!")},$=G(J,"put","".concat("https://server.docify.devtahsin.com","/api/users/me"),{name:l,phone:E,password:g,password2:C});return Object(n.useEffect)(function(){return s(R.name),d(R.email),h(R.phone),function(){}},[R]),Object(n.useEffect)(function(){return $&&(W(!1),"error"===$.type?D($.data.message):(A($.data.message),delete $.data.message,Y($.data),y(""),N(""),setTimeout(function(){A()},3e3)),V(!1)),function(){W(!1)}},[$]),c.a.createElement(T.a,{show:t,onHide:function(){V(!1),a()}},c.a.createElement(T.a.Header,{closeButton:!0},c.a.createElement(T.a.Title,null,c.a.createElement("h5",null,"Assalamu Alaikum, ",R.name))),c.a.createElement(T.a.Body,null,c.a.createElement("form",{onSubmit:X},c.a.createElement(F,{variant:"danger",show:_},_),c.a.createElement(F,{variant:"success",show:L},L),c.a.createElement(H,{loading:K,text:"Updating"}),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicName"},c.a.createElement(P.a.Label,null,"Name"),c.a.createElement(P.a.Control,{type:"text",placeholder:"What should we call you now?",value:l,onChange:function(e){s(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicEmail"},c.a.createElement(P.a.Label,null,"Email address"),c.a.createElement(P.a.Control,{type:"email",placeholder:"You can't change your email",value:m,onChange:function(e){d(e.target.value)},disabled:!0}),c.a.createElement(P.a.Text,{className:"text-muted"},"You can't change your email.")),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicPhone"},c.a.createElement(P.a.Label,null,"Phone"),c.a.createElement(P.a.Control,{type:"text",minLength:"11",maxLength:"11",placeholder:"Phone number must be bangladeshi",value:E,onChange:function(e){h(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicCurrentPassword"},c.a.createElement(P.a.Label,null,"Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Enter your Password",value:g,onChange:function(e){y(e.target.value)}})),c.a.createElement(P.a.Group,{className:"mb-3",controlId:"formBasicNewPassword"},c.a.createElement(P.a.Label,null,"New Password"),c.a.createElement(P.a.Control,{type:"password",placeholder:"Enter new Password",value:C,onChange:function(e){N(e.target.value)}}),c.a.createElement(P.a.Text,{className:"text-muted"},"Leave this empty if you do not want to change your password.")),c.a.createElement(U.a,{variant:"primary",type:"submit",onClick:X},"Update Account"))))},we=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),l=Object(f.a)(o,2),s=l[0],u=l[1],i=O().logout,m=W().setShowNewDocModal,d=D().dispatchDocs,p=G(s,"post","".concat("https://server.docify.devtahsin.com","/api/users/logout"));return Object(n.useEffect)(function(){return p&&"success"===p.type&&(d({type:"unload"}),i()),function(){u(!1)}},[p]),c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h4",null,"Dashboard"),c.a.createElement("div",null,c.a.createElement(U.a,{className:"ms-2",variant:"light",onClick:function(){m(!0)}},c.a.createElement("i",{className:"bi bi-plus-circle"})),c.a.createElement(U.a,{variant:"light",className:"ms-2",onClick:function(){r(!0)}},c.a.createElement("i",{className:"bi bi-person"})),c.a.createElement(U.a,{className:"ms-2",variant:"light",onClick:function(){u(!0)}},c.a.createElement("i",{className:"bi bi-box-arrow-right"})))),c.a.createElement("hr",null),c.a.createElement(ye,{show:a,handleClose:function(){r(!1)}}))},Se=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!0),l=Object(f.a)(o,2),s=l[0],u=l[1],i=D(),m=i.docs,d=i.dispatchDocs,p=G(a,"get","".concat("https://server.docify.devtahsin.com","/api/docs/"));return Object(n.useEffect)(function(){if(p&&"success"===p.type){var e=p.data.docs;p.data.docs.length>0&&d({type:"load",payload:e}),u(!1),r(!1)}return function(){u(!1),r(!1)}},[p]),Object(n.useEffect)(function(){return m&&m.length>0&&u(!1),(!m||m.length<1)&&(u(!0),r(!0)),function(){r(!1)}},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne.a,{fluid:!0,className:"rounded d-flex align-items-center justify-content-center"},c.a.createElement(ne.a,{className:"text-light rounded p-2 ".concat(le.a.dashboard)},c.a.createElement(we,null),c.a.createElement(F,{variant:"secondary",show:!s&&m&&m.length<1},"No document uploaded yet"),c.a.createElement(H,{loading:s,text:"Getting your docs"}),c.a.createElement(ge,{docs:m}))))},Ce=function(){return c.a.createElement("div",{className:"text-light"},"NewUI")},Ne=function(){return c.a.createElement(ne.a,{className:"d-flex flex-column text-center align-items-center justify-content-center text-light"},c.a.createElement("h1",{className:"display-1"},"404"),c.a.createElement("br",null),c.a.createElement("h4",null,"Sorry! We couldn't find the page you are looking for."),c.a.createElement(l.b,{to:"/"},c.a.createElement(U.a,{variant:"primary"},"Back to homepage")))},xe=function(){return c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(w,{exact:!0,path:"/",component:Se}),c.a.createElement(w,{exact:!0,path:"/new",component:Ce}),c.a.createElement(s.b,{component:Ne})))},ke=function(){return c.a.createElement(y,null,c.a.createElement(ee,null,c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(S,{exact:!0,path:"/login",component:ce}),c.a.createElement(S,{exact:!0,path:"/signup",component:re}),c.a.createElement(w,{path:"/",component:xe})))))};a(161),a(162),a(163),a(164),a(165),a(166);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ke,null)),document.getElementById("root"))},42:function(e,t,a){e.exports={options:"Options_options__3yhaW",show:"Options_show__fSJpq",option:"Options_option__133mk"}},63:function(e,t,a){e.exports={formCard:"FormCard_formCard__3C1-5"}},67:function(e,t,a){e.exports={galleryItem:"GalleryItem_galleryItem__1a3Wv",thumbnail_container:"GalleryItem_thumbnail_container__37xCQ",thumbnail:"GalleryItem_thumbnail__2uZjL"}},91:function(e,t,a){e.exports={layout:"Layout_layout__2ixcT"}},92:function(e,t,a){},98:function(e,t,a){e.exports=a(167)}},[[98,1,2]]]);
//# sourceMappingURL=main.f860d61e.chunk.js.map